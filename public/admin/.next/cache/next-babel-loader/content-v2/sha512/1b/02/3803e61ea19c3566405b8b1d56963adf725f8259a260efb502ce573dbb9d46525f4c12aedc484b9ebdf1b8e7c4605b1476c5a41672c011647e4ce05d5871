{"ast":null,"code":"import cookie from 'js-cookie';\nexport var fetchAdmin = function fetchAdmin() {\n  return function (dispatch) {\n    dispatch({\n      type: 'AUTHENTICATING_ADMIN'\n    });\n    fetch(\"\".concat(process.env.BASE_URL, \"/getProfile?token=\").concat(cookie.get('admin_token')), {\n      method: 'GET',\n      'Access-Control-Allow-Origin': '*',\n      'Content-Type': 'application/json'\n    }).then(function (response) {\n      if (response.ok) {\n        return response;\n      }\n\n      var error = new Error(\"Error \".concat(response.status, \": \").concat(response.statusText));\n      error.response = response;\n      throw error;\n    }, function (error) {\n      var errmess = new Error(error.message);\n      throw errmess;\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      if (data.success) {\n        dispatch({\n          type: 'SET_CURRENT_ADMIN',\n          payload: data\n        });\n      } else {\n        cookie.remove('admin_token');\n      }\n    })[\"catch\"](function (error) {\n      cookie.remove('admin_token');\n      console.log(error.message || 'Error');\n    });\n  };\n};","map":{"version":3,"sources":["E:/icredit/frontend-admin/store/actions/adminActions.js"],"names":["cookie","fetchAdmin","dispatch","type","fetch","process","env","BASE_URL","get","method","then","response","ok","error","Error","status","statusText","errmess","message","json","data","success","payload","remove","console","log"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,WAAnB;AACA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAM,UAAAC,QAAQ,EAAI;AACxCA,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAR;AACAC,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,QAAhB,+BAA6CP,MAAM,CAACQ,GAAP,CAAW,aAAX,CAA7C,GAA0E;AAC7EC,MAAAA,MAAM,EAAE,KADqE;AAE7E,qCAA+B,GAF8C;AAG7E,sBAAgB;AAH6D,KAA1E,CAAL,CAKCC,IALD,CAKM,UAAAC,QAAQ,EAAI;AAChB,UAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,eAAOD,QAAP;AACD;;AACD,UAAME,KAAK,GAAG,IAAIC,KAAJ,iBAAmBH,QAAQ,CAACI,MAA5B,eAAuCJ,QAAQ,CAACK,UAAhD,EAAd;AACAH,MAAAA,KAAK,CAACF,QAAN,GAAiBA,QAAjB;AACA,YAAME,KAAN;AACD,KAZD,EAaE,UAAAA,KAAK,EAAI;AACP,UAAMI,OAAO,GAAG,IAAIH,KAAJ,CAAUD,KAAK,CAACK,OAAhB,CAAhB;AACA,YAAMD,OAAN;AACD,KAhBH,EAiBCP,IAjBD,CAiBM,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAACQ,IAAT,EAAJ;AAAA,KAjBd,EAkBCT,IAlBD,CAkBM,UAAAU,IAAI,EAAI;AACZ,UAAGA,IAAI,CAACC,OAAR,EAAiB;AACfnB,QAAAA,QAAQ,CAAC;AAACC,UAAAA,IAAI,EAAE,mBAAP;AAA4BmB,UAAAA,OAAO,EAAEF;AAArC,SAAD,CAAR;AACD,OAFD,MAGI;AACFpB,QAAAA,MAAM,CAACuB,MAAP,CAAc,aAAd;AACD;AACF,KAzBD,WA0BO,UAACV,KAAD,EAAW;AAChBb,MAAAA,MAAM,CAACuB,MAAP,CAAc,aAAd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYZ,KAAK,CAACK,OAAN,IAAiB,OAA7B;AACD,KA7BD;AA8BD,GAhCuB;AAAA,CAAnB","sourcesContent":["import cookie from 'js-cookie'\r\nexport const fetchAdmin = () => dispatch => {\r\n    dispatch({type: 'AUTHENTICATING_ADMIN'});\r\n    fetch(`${process.env.BASE_URL}/getProfile?token=${cookie.get('admin_token')}`, {\r\n      method: 'GET',\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Content-Type': 'application/json'\r\n    })\r\n    .then(response => {\r\n      if (response.ok) {\r\n        return response;\r\n      }\r\n      const error = new Error(`Error ${response.status}: ${response.statusText}`);\r\n      error.response = response;\r\n      throw error;\r\n    },\r\n      error => {\r\n        const errmess = new Error(error.message);\r\n        throw errmess;\r\n      })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      if(data.success) {\r\n        dispatch({type: 'SET_CURRENT_ADMIN', payload: data})\r\n      }\r\n     else {\r\n        cookie.remove('admin_token');\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      cookie.remove('admin_token')\r\n      console.log(error.message || 'Error')\r\n    })\r\n  }"]},"metadata":{},"sourceType":"module"}
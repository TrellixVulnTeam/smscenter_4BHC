{"ast":null,"code":"import cookie from 'js-cookie';\nexport const fetchAdmin = () => dispatch => {\n  dispatch({\n    type: 'AUTHENTICATING_ADMIN'\n  });\n  fetch(`${process.env.BASE_URL}/getProfile?token=${cookie.get('admin_token')}`, {\n    method: 'GET',\n    'Access-Control-Allow-Origin': '*',\n    'Content-Type': 'application/json'\n  }).then(response => {\n    if (response.ok) {\n      return response;\n    }\n\n    const error = new Error(`Error ${response.status}: ${response.statusText}`);\n    error.response = response;\n    throw error;\n  }, error => {\n    const errmess = new Error(error.message);\n    throw errmess;\n  }).then(response => response.json()).then(data => {\n    if (data.success) {\n      dispatch({\n        type: 'SET_CURRENT_ADMIN',\n        payload: data\n      });\n    } else {\n      cookie.remove('admin_token');\n    }\n  }).catch(error => {\n    cookie.remove('admin_token');\n    console.log(error.message || 'Error');\n  });\n};","map":{"version":3,"sources":["E:/icredit/frontend-admin/store/actions/adminActions.js"],"names":["cookie","fetchAdmin","dispatch","type","fetch","process","env","BASE_URL","get","method","then","response","ok","error","Error","status","statusText","errmess","message","json","data","success","payload","remove","catch","console","log"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,WAAnB;AACA,OAAO,MAAMC,UAAU,GAAG,MAAMC,QAAQ,IAAI;AACxCA,EAAAA,QAAQ,CAAC;AAACC,IAAAA,IAAI,EAAE;AAAP,GAAD,CAAR;AACAC,EAAAA,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,QAAS,qBAAoBP,MAAM,CAACQ,GAAP,CAAW,aAAX,CAA0B,EAAvE,EAA0E;AAC7EC,IAAAA,MAAM,EAAE,KADqE;AAE7E,mCAA+B,GAF8C;AAG7E,oBAAgB;AAH6D,GAA1E,CAAL,CAKCC,IALD,CAKMC,QAAQ,IAAI;AAChB,QAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,aAAOD,QAAP;AACD;;AACD,UAAME,KAAK,GAAG,IAAIC,KAAJ,CAAW,SAAQH,QAAQ,CAACI,MAAO,KAAIJ,QAAQ,CAACK,UAAW,EAA3D,CAAd;AACAH,IAAAA,KAAK,CAACF,QAAN,GAAiBA,QAAjB;AACA,UAAME,KAAN;AACD,GAZD,EAaEA,KAAK,IAAI;AACP,UAAMI,OAAO,GAAG,IAAIH,KAAJ,CAAUD,KAAK,CAACK,OAAhB,CAAhB;AACA,UAAMD,OAAN;AACD,GAhBH,EAiBCP,IAjBD,CAiBMC,QAAQ,IAAIA,QAAQ,CAACQ,IAAT,EAjBlB,EAkBCT,IAlBD,CAkBMU,IAAI,IAAI;AACZ,QAAGA,IAAI,CAACC,OAAR,EAAiB;AACfnB,MAAAA,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAAE,mBAAP;AAA4BmB,QAAAA,OAAO,EAAEF;AAArC,OAAD,CAAR;AACD,KAFD,MAGI;AACFpB,MAAAA,MAAM,CAACuB,MAAP,CAAc,aAAd;AACD;AACF,GAzBD,EA0BCC,KA1BD,CA0BQX,KAAD,IAAW;AAChBb,IAAAA,MAAM,CAACuB,MAAP,CAAc,aAAd;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYb,KAAK,CAACK,OAAN,IAAiB,OAA7B;AACD,GA7BD;AA8BD,CAhCI","sourcesContent":["import cookie from 'js-cookie'\r\nexport const fetchAdmin = () => dispatch => {\r\n    dispatch({type: 'AUTHENTICATING_ADMIN'});\r\n    fetch(`${process.env.BASE_URL}/getProfile?token=${cookie.get('admin_token')}`, {\r\n      method: 'GET',\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Content-Type': 'application/json'\r\n    })\r\n    .then(response => {\r\n      if (response.ok) {\r\n        return response;\r\n      }\r\n      const error = new Error(`Error ${response.status}: ${response.statusText}`);\r\n      error.response = response;\r\n      throw error;\r\n    },\r\n      error => {\r\n        const errmess = new Error(error.message);\r\n        throw errmess;\r\n      })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      if(data.success) {\r\n        dispatch({type: 'SET_CURRENT_ADMIN', payload: data})\r\n      }\r\n     else {\r\n        cookie.remove('admin_token');\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      cookie.remove('admin_token')\r\n      console.log(error.message || 'Error')\r\n    })\r\n  }"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _classCallCheck from \"E:/icredit/frontend-admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:/icredit/frontend-admin/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"E:/icredit/frontend-admin/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"E:/icredit/frontend-admin/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"E:/icredit/frontend-admin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:/icredit/frontend-admin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"E:/icredit/frontend-admin/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"E:\\\\icredit\\\\frontend-admin\\\\pages\\\\telegram.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport axios from 'axios';\nimport { fetchAnsweredMsg as _fetchAnsweredMsg, fetchNonAnsweredMsg as _fetchNonAnsweredMsg } from '../store/actions/telegram';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport MessageDetail from '../components/shared/messageDetailed';\nimport { helloUser } from '../defaults/hello';\nimport Header from '../components/admin/Header';\nimport Footer from '../components/admin/Footer';\nimport disableScroll from 'disable-scroll';\nimport cookie from 'js-cookie';\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    nonanswered: state.nonanswered,\n    answered: state.answered\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchAnsweredMsg: function fetchAnsweredMsg() {\n      return dispatch(_fetchAnsweredMsg());\n    },\n    fetchNonAnsweredMsg: function fetchNonAnsweredMsg() {\n      return dispatch(_fetchNonAnsweredMsg());\n    }\n  };\n};\n\nvar Telegram = /*#__PURE__*/function (_React$Component) {\n  _inherits(Telegram, _React$Component);\n\n  var _super = _createSuper(Telegram);\n\n  function Telegram() {\n    var _this;\n\n    _classCallCheck(this, Telegram);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      collapse: \"\",\n      message: '',\n      answer: '',\n      code: '',\n      loading: false,\n      answers: true\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (msgid, question, iin, id) {\n      var groupText = \"\\n\\u041E\\u0442\\u0432\\u0435\\u0442\\u0438\\u043B\\u0438 \\u043D\\u0430 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441: \".concat(question, \"%0A \\n\\u0418\\u0418\\u041D: \").concat(iin, \"%0A%0A\\n\").concat(helloUser(), \"!%0A\\n\").concat(_this.state.answer.split('%0A'), \"%0A%0A\\n\\u0421 \\u0443\\u0432\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\\u043C I-credit.kz%0A%0A\\n   #\\u043E\\u0442\\u0432\\u0435\\u0442\\u0438\\u043B\\u0438 \");\n      var errorMessage = \"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0432\\u0435\\u0442. \\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u043B \\u043D\\u0430\\u0448 \\u0442\\u0435\\u043B\\u0435\\u0433\\u0440\\u0430\\u043C \\u0431\\u043E\\u0442-> \\u0418\\u0418\\u041D: \".concat(iin, \"%0A%0A;\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441: \").concat(question, \"%0A #\\u043E\\u0448\\u0438\\u0431\\u043A\\u0430\");\n      var answerText = \"\\n\".concat(helloUser(), \"!%0A\\n\").concat(_this.state.answer.split('%0A'), \"%0A%0A\\n\\u0421 \\u0443\\u0432\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\\u043C I-credit.kz\\n    \");\n\n      if (_this.state.answer) {\n        // console.log(this.state.answer.length)\n        _this.setState({\n          loading: true\n        });\n\n        axios.post(\"https://api.telegram.org/bot1464143689:AAHakxNTvvBG9qpzrH8Z-lNNyEjAS2aW8-U/sendMessage?chat_id=\".concat(msgid, \"&text=\").concat(answerText, \"&ie=UTF-8&oe=UTF-8&parse_mode=html\")).then(function (response) {\n          if (response.data.ok) {\n            axios.put(\"https://api.money-men.kz/api/telegram/\".concat(id)).then(function (response) {\n              if (response.data.success) {\n                axios.post(\"https://api.telegram.org/bot1464143689:AAHakxNTvvBG9qpzrH8Z-lNNyEjAS2aW8-U/sendMessage?chat_id=-438259555&text=\".concat(groupText, \"&ie=UTF-8&oe=UTF-8&parse_mode=html\"));\n\n                _this.setState({\n                  loading: false\n                });\n\n                _this.setState({\n                  message: 'Отправлено',\n                  collapse: '',\n                  answer: ''\n                });\n\n                setTimeout(function () {\n                  _this.setState({\n                    message: ''\n                  });\n                }, 1500);\n\n                _this.props.fetchNonAnsweredMsg();\n\n                _this.props.fetchAnsweredMsg();\n              }\n            });\n          } else {\n            _this.setState({\n              message: 'Не отправлено'\n            });\n\n            setTimeout(function () {\n              _this.setState({\n                message: '',\n                collapse: '',\n                answer: ''\n              });\n            }, 1500);\n          }\n        })[\"catch\"](function (error) {\n          if (error.response) {\n            axios.put(\"https://api.money-men.kz/api/telegram/\".concat(id)).then(function (response) {\n              axios.post(\"https://api.telegram.org/bot1464143689:AAHakxNTvvBG9qpzrH8Z-lNNyEjAS2aW8-U/sendMessage?chat_id=-438259555&text=\".concat(errorMessage, \"&ie=UTF-8&oe=UTF-8&parse_mode=html\")).then(function (res) {\n                location.reload();\n              });\n            });\n          }\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (event) {\n      // const value = event.target.value.replace(/[\\r\\n\\v]+/g, \"\");\n      _this.setState({\n        answer: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCode\", function (event) {\n      _this.setState({\n        code: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRecommend\", function (e) {\n      _this.setState({\n        answer: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"submitCode\", function () {\n      if (_this.state.code === 'admin123') {\n        cookie.set('botmsg', '3917', {\n          expires: 60\n        });\n        location.reload();\n      } else {\n        alert('Ошибка кода');\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleCollapse\", function (id) {\n      return function () {\n        if (!_this.state.collapse || id !== _this.state.collapse) {\n          _this.setState({\n            collapse: id\n          });\n        } else if (_this.state.collapse === id) {\n          _this.setState({\n            collapse: false\n          });\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAnswered\", function () {\n      _this.setState(function (prev) {\n        return {\n          answers: !prev.answers\n        };\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Telegram, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.fetchNonAnsweredMsg();\n      this.props.fetchAnsweredMsg();\n    }\n  }, {\n    key: \"keypress\",\n    value: function keypress(event, msgid, question, iin, id) {\n      if (event.keyCode == 13 && event.shiftKey) {\n        this.handleSubmit(msgid, question, iin, id);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // if (this.props.nonanswered.nonanswered.length === 0 && this.props.nonanswered.isLoading=== false) {\n      //     return (<div className='mb-5 container otherPages'>\n      //          {this.state.answers ?  <button active className='btn btn-dark mb-3' onClick={() => this.handleAnswered()}>Получить неотвеченные</button> \n      //         :   <button active className='btn btn-dark mb-3 mr-3' onClick={() => this.handleAnswered()}>Получить отвеченные</button>}\n      //         <h4 className='mb-3 text-center'>Неотвеченные вопросы</h4>\n      //         <p className='text-center'>Нет вопросов</p>\n      //     </div>)\n      // }\n      if (this.props.nonanswered.isLoading) {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container  otherPages text-center\",\n            children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430.......\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true);\n      }\n\n      if (!this.state.answers && !this.props.answered.isLoading) {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n            role: \"main\",\n            children: /*#__PURE__*/_jsxDEV(\"section\", {\n              \"class\": \"panel important\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container otherPages\",\n                children: [this.state.answers ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  active: true,\n                  className: \"btn btn-dark mb-3\",\n                  onClick: function onClick() {\n                    return _this2.handleAnswered();\n                  },\n                  children: \"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u043E\\u0442\\u0432\\u0435\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 40\n                }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  active: true,\n                  className: \"btn btn-dark mb-3 mr-3\",\n                  onClick: function onClick() {\n                    return _this2.handleAnswered();\n                  },\n                  children: \"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u043D\\u0435\\u043E\\u0442\\u0432\\u0435\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 21\n                }, this), this.state.message.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"tlgmsg alert alert-info\",\n                  children: this.state.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 48\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 117\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"mb-3 text-center\",\n                  children: [\"\\u041E\\u0442\\u0432\\u0435\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B \\u0437\\u0430 \\u043D\\u0435\\u0434\\u0435\\u043B\\u044E (\", this.props.answered.answered.length, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: this.props.answered.answered.map(function (elem) {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-4\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"card mt-2 answeredCard\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"card-body\",\n                          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"tinydate\",\n                            children: [\"\\u0417\\u0430\\u0434\\u0430\\u043D\\u043E: \", new Intl.DateTimeFormat('ru', {\n                              year: 'numeric',\n                              month: 'short',\n                              day: '2-digit',\n                              hour: 'numeric',\n                              minute: 'numeric'\n                            }).format(new Date(Date.parse(elem.created_at)))]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 175,\n                            columnNumber: 29\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"tinydate\",\n                            children: [\"\\u041E\\u0442\\u0432\\u0435\\u0447\\u0435\\u043D\\u043E: \", new Intl.DateTimeFormat('ru', {\n                              year: 'numeric',\n                              month: 'short',\n                              day: '2-digit',\n                              hour: 'numeric',\n                              minute: 'numeric'\n                            }).format(new Date(Date.parse(elem.updated_at)))]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 176,\n                            columnNumber: 29\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"card-text\",\n                            children: [\"\\u0418\\u043C\\u044F: \", elem.name, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 178,\n                              columnNumber: 54\n                            }, _this2), \"\\u0418\\u0418\\u041D: \", elem.iin]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 177,\n                            columnNumber: 33\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"i\", {\n                            children: [\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441: \", elem.question]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 180,\n                            columnNumber: 33\n                          }, _this2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 174,\n                          columnNumber: 29\n                        }, _this2)\n                      }, elem.id, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 173,\n                        columnNumber: 26\n                      }, _this2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 22\n                    }, _this2);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 16\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 6\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true);\n      } else return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n          role: \"main\",\n          children: /*#__PURE__*/_jsxDEV(\"section\", {\n            \"class\": \"panel important\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container otherPages\",\n              children: [this.state.answers ? /*#__PURE__*/_jsxDEV(\"button\", {\n                active: true,\n                className: \"btn btn-dark mb-3\",\n                onClick: function onClick() {\n                  return _this2.handleAnswered();\n                },\n                children: \"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u043E\\u0442\\u0432\\u0435\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 40\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                active: true,\n                className: \"btn btn-dark mb-3 mr-3\",\n                onClick: function onClick() {\n                  return _this2.handleAnswered();\n                },\n                children: \"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u043D\\u0435\\u043E\\u0442\\u0432\\u0435\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 21\n              }, this), this.state.message.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tlgmsg alert alert-info\",\n                children: this.state.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 48\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 117\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"mb-3 text-center\",\n                children: [\"\\u041D\\u0435\\u043E\\u0442\\u0432\\u0435\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B (\", this.props.nonanswered.nonanswered.length, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: this.props.nonanswered.nonanswered.map(function (elem) {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"card mt-2\",\n                      onClick: _this2.toggleCollapse(elem.id),\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"card-body\",\n                        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"tinydate\",\n                          children: new Intl.DateTimeFormat('ru', {\n                            year: 'numeric',\n                            month: 'short',\n                            day: '2-digit',\n                            hour: 'numeric',\n                            minute: 'numeric'\n                          }).format(new Date(Date.parse(elem.created_at)))\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 213,\n                          columnNumber: 29\n                        }, _this2), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"card-text\",\n                          children: [\"\\u0418\\u043C\\u044F: \", elem.name, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 215,\n                            columnNumber: 54\n                          }, _this2), \"\\u0418\\u0418\\u041D: \", elem.iin]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 214,\n                          columnNumber: 33\n                        }, _this2), /*#__PURE__*/_jsxDEV(\"i\", {\n                          children: [\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441: \", elem.question]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 217,\n                          columnNumber: 33\n                        }, _this2)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 212,\n                        columnNumber: 29\n                      }, _this2)\n                    }, elem.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 26\n                    }, _this2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 22\n                  }, _this2);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(Modal, {\n                isOpen: this.state.collapse,\n                toggle: this.toggleCollapse(this.state.collapse),\n                size: \"lg\",\n                children: /*#__PURE__*/_jsxDEV(ModalBody, {\n                  children: /*#__PURE__*/_jsxDEV(MessageDetail, {\n                    msg: this.props.nonanswered.nonanswered.filter(function (el) {\n                      return el.id === parseInt(_this2.state.collapse);\n                    })[0],\n                    answer: this.state.answer,\n                    handleChange: this.handleChange,\n                    handleSubmit: this.handleSubmit,\n                    handleRecommend: this.handleRecommend,\n                    keypress: this.keypress,\n                    loading: this.state.loading\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true);\n    }\n  }]);\n\n  return Telegram;\n}(React.Component);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Telegram);","map":{"version":3,"sources":["E:/icredit/frontend-admin/pages/telegram.js"],"names":["React","axios","fetchAnsweredMsg","fetchNonAnsweredMsg","Modal","ModalHeader","ModalBody","connect","MessageDetail","helloUser","Header","Footer","disableScroll","cookie","mapStateToProps","state","nonanswered","answered","mapDispatchToProps","dispatch","Telegram","collapse","message","answer","code","loading","answers","msgid","question","iin","id","groupText","split","errorMessage","answerText","setState","post","then","response","data","ok","put","success","setTimeout","props","error","res","location","reload","event","target","value","e","set","expires","alert","prev","keyCode","shiftKey","handleSubmit","isLoading","handleAnswered","length","map","elem","Intl","DateTimeFormat","year","month","day","hour","minute","format","Date","parse","created_at","updated_at","name","toggleCollapse","filter","el","parseInt","handleChange","handleRecommend","keypress","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport {fetchAnsweredMsg, fetchNonAnsweredMsg} from '../store/actions/telegram'\r\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\r\nimport {connect} from 'react-redux'\r\nimport MessageDetail from '../components/shared/messageDetailed'\r\nimport {helloUser} from '../defaults/hello'\r\nimport Header from '../components/admin/Header'\r\nimport Footer from '../components/admin/Footer'\r\nimport disableScroll from 'disable-scroll';\r\nimport cookie from 'js-cookie'\r\nconst mapStateToProps = state => {\r\n  return {nonanswered: state.nonanswered, answered: state.answered}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  fetchAnsweredMsg: () => dispatch(fetchAnsweredMsg()),\r\n  fetchNonAnsweredMsg: () => dispatch(fetchNonAnsweredMsg()),\r\n})\r\n\r\n\r\nclass Telegram extends React.Component {\r\n\r\n  componentDidMount() {\r\n    this.props.fetchNonAnsweredMsg();\r\n    this.props.fetchAnsweredMsg();\r\n  }\r\n\r\n  state = {\r\n    collapse: \"\",\r\n    message: '',\r\n    answer: '',\r\n    code: '',\r\n    loading: false,\r\n    answers: true,\r\n  }\r\n  \r\n  handleSubmit = (msgid,question,iin, id) => {\r\n    const groupText = `\r\nОтветили на вопрос: ${question}%0A \r\nИИН: ${iin}%0A%0A\r\n${helloUser()}!%0A\r\n${this.state.answer.split('%0A')}%0A%0A\r\nС уважением I-credit.kz%0A%0A\r\n   #ответили `\r\n\r\n    const errorMessage =  `Не удалось отправить ответ. Пользователь блокировал наш телеграм бот-> ИИН: ${iin}%0A%0A;Вопрос: ${question}%0A #ошибка`\r\n    const answerText = `\r\n${helloUser()}!%0A\r\n${this.state.answer.split('%0A')}%0A%0A\r\nС уважением I-credit.kz\r\n    `\r\n        if(this.state.answer) {\r\n            // console.log(this.state.answer.length)\r\n            this.setState({loading: true})\r\n            axios.post(`https://api.telegram.org/bot1464143689:AAHakxNTvvBG9qpzrH8Z-lNNyEjAS2aW8-U/sendMessage?chat_id=${msgid}&text=${answerText}&ie=UTF-8&oe=UTF-8&parse_mode=html`)\r\n            .then(response=> {\r\n                if(response.data.ok) {\r\n                    axios.put(`https://api.money-men.kz/api/telegram/${id}`)\r\n                    .then(response=>{\r\n                        if(response.data.success) {\r\n                            axios.post(`https://api.telegram.org/bot1464143689:AAHakxNTvvBG9qpzrH8Z-lNNyEjAS2aW8-U/sendMessage?chat_id=-438259555&text=${groupText}&ie=UTF-8&oe=UTF-8&parse_mode=html`)\r\n                            this.setState({loading: false})\r\n                            this.setState({message: 'Отправлено',collapse: '', answer: ''})\r\n                            setTimeout(() => {\r\n                                this.setState({message: ''})\r\n                            },1500)\r\n                            this.props.fetchNonAnsweredMsg()\r\n                            this.props.fetchAnsweredMsg()\r\n                        }\r\n                    })\r\n                    \r\n                }else {\r\n                    this.setState({message: 'Не отправлено'})\r\n                    setTimeout(() => {\r\n                        this.setState({message: '', collapse: '', answer: ''})\r\n                    },1500)\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n               if(error.response) {\r\n                   axios.put(`https://api.money-men.kz/api/telegram/${id}`)\r\n                   .then(response=> {\r\n                    axios.post(`https://api.telegram.org/bot1464143689:AAHakxNTvvBG9qpzrH8Z-lNNyEjAS2aW8-U/sendMessage?chat_id=-438259555&text=${errorMessage}&ie=UTF-8&oe=UTF-8&parse_mode=html`)\r\n                        .then(res=> {\r\n                            location.reload()\r\n                        })\r\n                   })\r\n                   \r\n               }\r\n            })\r\n        }\r\n    }\r\n\r\n    keypress(event, msgid,question,iin, id) {\r\n      if(event.keyCode == 13 && event.shiftKey){\r\n        this.handleSubmit(msgid,question,iin,id)\r\n      }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n      // const value = event.target.value.replace(/[\\r\\n\\v]+/g, \"\");\r\n      this.setState({ answer: event.target.value });\r\n    }\r\n    handleCode = (event) => {\r\n      this.setState({code: event.target.value})\r\n    }\r\n\r\n    handleRecommend = e => {\r\n        this.setState({answer: e.target.value})\r\n    }\r\n    submitCode = () => {\r\n      if(this.state.code === 'admin123') {\r\n        cookie.set('botmsg','3917', {expires: 60})\r\n        location.reload();\r\n      }else {\r\n        alert('Ошибка кода')\r\n      }\r\n    }\r\n\r\n    toggleCollapse = id => () => {\r\n        if (!this.state.collapse || id !== this.state.collapse) {\r\n            this.setState({\r\n            collapse: id\r\n            });\r\n        } else if (this.state.collapse === id) {\r\n            this.setState({ collapse: false })\r\n        }\r\n    }\r\n\r\n    handleAnswered = () => {\r\n      this.setState(prev=>({\r\n          answers: !prev.answers\r\n      }))\r\n    }\r\n\r\n    render() {\r\n        // if (this.props.nonanswered.nonanswered.length === 0 && this.props.nonanswered.isLoading=== false) {\r\n        //     return (<div className='mb-5 container otherPages'>\r\n        //          {this.state.answers ?  <button active className='btn btn-dark mb-3' onClick={() => this.handleAnswered()}>Получить неотвеченные</button> \r\n                \r\n        //         :   <button active className='btn btn-dark mb-3 mr-3' onClick={() => this.handleAnswered()}>Получить отвеченные</button>}\r\n        //         <h4 className='mb-3 text-center'>Неотвеченные вопросы</h4>\r\n        //         <p className='text-center'>Нет вопросов</p>\r\n        //     </div>)\r\n        // }\r\n        if(this.props.nonanswered.isLoading) {\r\n            return (\r\n                <>\r\n                <Header/>\r\n                <div className='container  otherPages text-center'>\r\n                    Загрузка.......\r\n                </div>\r\n                <Footer/>\r\n                </>\r\n            )\r\n        }\r\n        if(!this.state.answers && !this.props.answered.isLoading) {\r\n            return (\r\n                <>\r\n                <Header/>\r\n                <main role=\"main\">\r\n     <section class=\"panel important\">\r\n              <div className='container otherPages'>\r\n                {this.state.answers ?  <button active className='btn btn-dark mb-3' onClick={() => this.handleAnswered()}>Получить отвеченные</button> \r\n                \r\n                :   <button active className='btn btn-dark mb-3 mr-3' onClick={() => this.handleAnswered()}>Получить неотвеченные</button>}\r\n                {this.state.message.length>0 ? <div className='tlgmsg alert alert-info'>{this.state.message}</div>: <div></div>}\r\n                <h4 className='mb-3 text-center'>Отвеченные вопросы за неделю ({this.props.answered.answered.length})</h4>\r\n               <div className='row'>\r\n                 {this.props.answered.answered.map(elem=>(\r\n                     <div className='col-md-4' >\r\n                         <div className='card mt-2 answeredCard' key={elem.id}>\r\n                            <div className='card-body'>\r\n                            <p className='tinydate'>Задано: {new Intl.DateTimeFormat('ru', { year: 'numeric', month: 'short', day: '2-digit', hour:'numeric', minute:'numeric' }).format(new Date(Date.parse(elem.created_at)))}</p>\r\n                            <p className='tinydate'>Отвечено: {new Intl.DateTimeFormat('ru', { year: 'numeric', month: 'short', day: '2-digit', hour:'numeric', minute:'numeric' }).format(new Date(Date.parse(elem.updated_at)))}</p>\r\n                                <p className='card-text'>\r\n                                    Имя: {elem.name} <br></br>ИИН: {elem.iin}\r\n                                </p>\r\n                                <i>Вопрос: {elem.question}</i>\r\n\r\n                            </div>\r\n                         </div>\r\n                     </div>\r\n                 ))}\r\n                </div>\r\n             </div>\r\n             </section>\r\n             </main>\r\n             <Footer/>\r\n             </>\r\n            )\r\n        }\r\n        else \r\n        return (\r\n            <>\r\n            <Header/>\r\n            <main role=\"main\">\r\n     <section class=\"panel important\">\r\n            <div className='container otherPages'>\r\n                {this.state.answers ?  <button active className='btn btn-dark mb-3' onClick={() => this.handleAnswered()}>Получить отвеченные</button> \r\n                \r\n                :   <button active className='btn btn-dark mb-3 mr-3' onClick={() => this.handleAnswered()}>Получить неотвеченные</button>}\r\n              \r\n               \r\n                {this.state.message.length>0 ? <div className='tlgmsg alert alert-info'>{this.state.message}</div>: <div></div>}\r\n                <h4 className='mb-3 text-center'>Неотвеченные вопросы ({this.props.nonanswered.nonanswered.length})</h4>\r\n             <div className='row'>\r\n                 {this.props.nonanswered.nonanswered.map(elem=>(\r\n                     <div className='col-md-4'>\r\n                         <div className='card mt-2' key={elem.id} onClick={this.toggleCollapse(elem.id)}>\r\n                            <div className='card-body'>\r\n                            <p className='tinydate'>{new Intl.DateTimeFormat('ru', { year: 'numeric', month: 'short', day: '2-digit', hour:'numeric', minute:'numeric' }).format(new Date(Date.parse(elem.created_at)))}</p>\r\n                                <p className='card-text'>\r\n                                    Имя: {elem.name} <br></br>ИИН: {elem.iin}\r\n                                </p>\r\n                                <i>Вопрос: {elem.question}</i>\r\n\r\n                            </div>\r\n                         </div>\r\n                     </div>\r\n                 ))}\r\n                 \r\n             </div>\r\n             <Modal  isOpen={this.state.collapse} toggle={this.toggleCollapse(this.state.collapse)}   size=\"lg\">\r\n                 <ModalBody>\r\n                    <MessageDetail \r\n                        msg={this.props.nonanswered.nonanswered.filter(el => el.id === parseInt(this.state.collapse))[0]} \r\n                        answer = {this.state.answer}\r\n                        handleChange = {this.handleChange}\r\n                        handleSubmit = {this.handleSubmit}\r\n                        handleRecommend={this.handleRecommend}\r\n                        keypress = {this.keypress}\r\n                        loading = {this.state.loading}\r\n                    />\r\n                 </ModalBody>\r\n\t\t\t</Modal>\r\n            </div>\r\n            </section>\r\n            </main>        \r\n            <Footer/>\r\n            </>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Telegram)"]},"metadata":{},"sourceType":"module"}
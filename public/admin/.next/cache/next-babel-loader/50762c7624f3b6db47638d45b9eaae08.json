{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\icredit\\\\frontend-admin\\\\pages\\\\users.js\";\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport Header from '../components/admin/Header';\nimport Footer from '../components/admin/Footer';\nimport swal from \"sweetalert\";\nimport cookie from 'js-cookie';\nimport { useDispatch, connect } from 'react-redux';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\n\nfunction mapStateToProps(state) {\n  return {\n    adminReducer: state.adminReducer\n  };\n}\n\nconst AdminUsers = ({\n  adminReducer\n}) => {\n  const dispatch = useDispatch();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: users,\n    1: setUsers\n  } = useState([]);\n  const {\n    0: edit,\n    1: setEdit\n  } = useState('');\n  const {\n    0: userDate,\n    1: setUserDate\n  } = useState({\n    id: null,\n    name: null,\n    email: null,\n    role_id: null\n  });\n  const {\n    0: newUser,\n    1: setNewUser\n  } = useState({\n    name: null,\n    email: null,\n    password: 'icredit123',\n    role_id: 2\n  });\n  const {\n    0: showModal,\n    1: setShowModal\n  } = useState(false);\n  const finalUser = users.filter(user => user.id !== adminReducer.user.id);\n\n  const handleClose = () => {\n    setShowModal(false);\n    setNewUser({\n      name: null,\n      email: null,\n      password: 'icredit123',\n      role_id: 2\n    });\n  };\n\n  const handleShow = () => setShowModal(true);\n\n  const getUser = () => {\n    axios.get(`${process.env.BASE_URL}/users`, {\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      setUsers(res.data);\n      setLoading(false);\n    });\n  };\n\n  useEffect(() => {\n    getUser();\n  }, []);\n\n  const editAccount = id => {\n    setEdit(id);\n    const user = users.filter(user => user.id === id);\n    setUserDate({\n      id: id,\n      name: user[0].name,\n      email: user[0].email,\n      role_id: user[0].role_id\n    });\n  };\n\n  const userAdd = e => {\n    axios.post(`${process.env.BASE_URL}/users`, {\n      name: newUser.name,\n      email: newUser.email,\n      password: newUser.password,\n      role_id: newUser.role_id,\n      token: cookie.get('admin_token')\n    }, {\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (res.data.success) {\n        dispatch({\n          type: 'ADM_SUCCESS_MESSAGE',\n          payload: res.data.message\n        });\n        getUser();\n        handleClose();\n      } else {\n        dispatch({\n          type: 'ADM_ERROR_MESSAGE',\n          payload: res.data.message\n        });\n      }\n    });\n    e.preventDefault();\n  };\n\n  const saveEdit = () => {\n    axios.put(`${process.env.BASE_URL}/edit`, {\n      token: cookie.get('admin_token'),\n      email: userDate.email,\n      name: userDate.name,\n      role_id: userDate.role_id,\n      user_id: userDate.id\n    }, {\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (res.data.success) {\n        dispatch({\n          type: 'ADM_SUCCESS_MESSAGE',\n          payload: res.data.message\n        });\n        setEdit('');\n        getUser();\n      } else {\n        dispatch({\n          type: 'ADM_ERROR_MESSAGE',\n          payload: res.data.message\n        });\n        getUser();\n      }\n    });\n  };\n\n  const deleteAccount = id => {\n    swal({\n      title: 'Вы уверены, что хотите удалить пользователя',\n      buttons: {\n        catch: {\n          text: 'Да',\n          value: 'yes'\n        },\n        cancel: 'Нет'\n      }\n    }).then(value => {\n      switch (value) {\n        case 'yes':\n          axios.get(`${process.env.BASE_URL}/deleteAccount?token=${cookie.get('admin_token')}&user_id=${id}`, {\n            headers: {\n              'Access-Control-Allow-Origin': '*'\n            }\n          }).then(response => {\n            if (response.data.success) {\n              dispatch({\n                type: 'ADM_SUCCESS_MESSAGE',\n                payload: response.data.message\n              });\n              getUser();\n            } else {\n              dispatch({\n                type: 'ADM_ERROR_MESSAGE',\n                payload: response.data.message\n              });\n            }\n          });\n      }\n    });\n  };\n\n  const cancelEdit = () => {\n    setEdit('');\n    getUser();\n  };\n\n  const userTable = (edit, user, index) => {\n    if (edit === user.id) {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n          scope: \"row\",\n          children: index + 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => setUserDate({\n              id: userDate.id,\n              name: e.target.value,\n              email: userDate.email,\n              role_id: userDate.role_id\n            }),\n            value: userDate.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => setUserDate({\n              id: userDate.id,\n              name: userDate.name,\n              email: e.target.value,\n              role_id: userDate.role_id\n            }),\n            value: userDate.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            onChange: e => setUserDate({\n              id: userDate.id,\n              name: userDate.name,\n              email: userDate.email,\n              role_id: e.target.value\n            }),\n            value: userDate.role_id,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \"Admin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 163\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"2\",\n              children: \"Moderator\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 195\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success mr-2\",\n            onClick: () => saveEdit(),\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: () => cancelEdit(),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }, this)]\n      }, userDate.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this);\n    } else return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n        scope: \"row\",\n        children: index + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: user.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: user.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: user.role_id === 1 ? 'Admin' : 'Moderator'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success mr-2\",\n          disabled: adminReducer.user.role_id === 1 ? false : true,\n          onClick: () => editAccount(user.id),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger\",\n          disabled: adminReducer.user.role_id === 1 ? false : true,\n          onClick: () => deleteAccount(user.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)]\n    }, user.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      role: \"main\",\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        class: \"panel important\",\n        children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"\\u0417\\u0430\\u0433\\u0443\\u0437\\u043A\\u0430...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 16\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex mb-3 justify-content-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Users\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-info\",\n              onClick: handleShow,\n              disabled: adminReducer.user.role_id === 1 ? false : true,\n              children: [\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 138\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-striped\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"#\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"\\u0418\\u043C\\u044F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Username\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"\\u0420\\u043E\\u043B\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: finalUser.map((user, index) => userTable(edit, user, index))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          isOpen: showModal,\n          toggle: () => handleClose(showModal),\n          size: \"md\",\n          children: /*#__PURE__*/_jsxDEV(ModalBody, {\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"form-group\",\n              onSubmit: e => userAdd(e),\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: e => setNewUser({\n                  password: newUser.password,\n                  name: e.target.value,\n                  email: newUser.email,\n                  role_id: newUser.role_id\n                }),\n                value: newUser.name,\n                className: \"input-group mb-2\",\n                type: \"text\",\n                placeholder: \"\\u0418\\u043C\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: e => setNewUser({\n                  password: newUser.password,\n                  name: newUser.name,\n                  email: e.target.value,\n                  role_id: newUser.role_id\n                }),\n                value: newUser.email,\n                className: \"input-group mt-2\",\n                type: \"text\",\n                placeholder: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                onChange: e => setNewUser({\n                  password: newUser.password,\n                  name: newUser.name,\n                  email: newUser.email,\n                  role_id: e.target.value\n                }),\n                value: newUser.email,\n                value: newUser.role_id,\n                className: \"input-group mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1\",\n                  children: \"Admin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 232\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"2\",\n                  children: \"Moderator\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 264\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-info mt-2\",\n                disabled: adminReducer.user.role_id === 1 ? false : true,\n                children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 9\n  }, this);\n};\n\nexport default connect(mapStateToProps)(AdminUsers);","map":{"version":3,"sources":["E:/icredit/frontend-admin/pages/users.js"],"names":["axios","React","useState","useEffect","Header","Footer","swal","cookie","useDispatch","connect","Modal","ModalHeader","ModalBody","mapStateToProps","state","adminReducer","AdminUsers","dispatch","loading","setLoading","users","setUsers","edit","setEdit","userDate","setUserDate","id","name","email","role_id","newUser","setNewUser","password","showModal","setShowModal","finalUser","filter","user","handleClose","handleShow","getUser","get","process","env","BASE_URL","headers","then","res","data","editAccount","userAdd","e","post","token","success","type","payload","message","preventDefault","saveEdit","put","user_id","deleteAccount","title","buttons","catch","text","value","cancel","response","cancelEdit","userTable","index","target","map"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, {useState, useEffect} from 'react';\r\nimport Header from '../components/admin/Header'\r\nimport Footer from '../components/admin/Footer'\r\nimport swal from \"sweetalert\";\r\nimport cookie from 'js-cookie'\r\nimport {useDispatch, connect} from 'react-redux'\r\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\r\n\r\nfunction mapStateToProps(state) {\r\n  return {adminReducer:state.adminReducer}\r\n}\r\nconst AdminUsers = ({adminReducer}) => {\r\n    const dispatch = useDispatch();\r\n    const [loading,setLoading] = useState(true);\r\n    const [users, setUsers] = useState([])\r\n    const [edit,setEdit] = useState('')\r\n    const [userDate,setUserDate] = useState({id: null,name: null, email: null, role_id: null})\r\n    const [newUser, setNewUser] = useState({name: null, email: null, password: 'icredit123', role_id: 2})\r\n    const [showModal, setShowModal] = useState(false);\r\n\r\n    const finalUser = users.filter(user=>user.id !== adminReducer.user.id);\r\n    const handleClose = () => {\r\n      setShowModal(false)\r\n      setNewUser({name: null, email: null, password: 'icredit123', role_id: 2})\r\n    };\r\n    const handleShow = () => setShowModal(true);\r\n    const getUser = () => {\r\n      axios.get(`${process.env.BASE_URL}/users`, {headers: {\r\n        'Access-Control-Allow-Origin': '*',\r\n        'Content-Type': 'application/json'\r\n      }})\r\n            .then(res => {\r\n                setUsers(res.data)\r\n                setLoading(false)\r\n            })\r\n    }\r\n    useEffect(() => {\r\n      getUser()\r\n    },[])\r\n\r\n    \r\n    const editAccount = (id) => {\r\n      setEdit(id);\r\n      const user = users.filter(user=>user.id === id);\r\n      setUserDate({id: id,name: user[0].name,email: user[0].email, role_id: user[0].role_id})\r\n    }\r\n\r\n\r\n    const userAdd = (e) => {\r\n      axios.post(`${process.env.BASE_URL}/users`, {\r\n        name: newUser.name,\r\n        email: newUser.email,\r\n        password: newUser.password,\r\n        role_id: newUser.role_id,\r\n        token: cookie.get('admin_token')\r\n      }, {headers: {\r\n          'Access-Control-Allow-Origin': '*',\r\n          'Content-Type': 'application/json'\r\n        }})\r\n        .then(res=> {\r\n          if(res.data.success) {\r\n            dispatch({type: 'ADM_SUCCESS_MESSAGE', payload: res.data.message})\r\n            getUser()\r\n            handleClose()\r\n          }else {\r\n              dispatch({type: 'ADM_ERROR_MESSAGE', payload: res.data.message})\r\n          }\r\n        })\r\n     \r\n      e.preventDefault()\r\n    }\r\n    const saveEdit = () => {\r\n      axios.put(`${process.env.BASE_URL}/edit`, {\r\n        token: cookie.get('admin_token'),\r\n        email: userDate.email,\r\n        name: userDate.name,\r\n        role_id: userDate.role_id,\r\n        user_id: userDate.id\r\n      }, {headers: {\r\n          'Access-Control-Allow-Origin': '*',\r\n          'Content-Type': 'application/json'\r\n        }})\r\n        .then(res => {\r\n          if(res.data.success) {\r\n            dispatch({type: 'ADM_SUCCESS_MESSAGE', payload: res.data.message})\r\n            setEdit('')\r\n            getUser()\r\n          }else {\r\n            dispatch({type: 'ADM_ERROR_MESSAGE', payload: res.data.message})\r\n            getUser()\r\n          }\r\n        })\r\n    }\r\n    const deleteAccount = (id) => {\r\n      swal({\r\n          title: 'Вы уверены, что хотите удалить пользователя',\r\n          buttons:{\r\n            catch:{\r\n              text: 'Да',\r\n              value: 'yes'\r\n            },\r\n            cancel: 'Нет'\r\n          }\r\n        }).then(value=>{\r\n          switch (value){\r\n            case 'yes':\r\n              axios.get(`${process.env.BASE_URL}/deleteAccount?token=${cookie.get('admin_token')}&user_id=${id}` ,{headers: {'Access-Control-Allow-Origin': '*'}})\r\n              .then(response => {\r\n                if(response.data.success) {\r\n                  dispatch({type: 'ADM_SUCCESS_MESSAGE', payload: response.data.message})\r\n                  getUser()\r\n                }else {\r\n                    dispatch({type: 'ADM_ERROR_MESSAGE', payload: response.data.message})\r\n                }\r\n              })\r\n          }\r\n        })\r\n    }\r\n\r\n    const cancelEdit = () => {\r\n      setEdit('');\r\n      getUser()\r\n    }\r\n\r\n    const userTable = (edit, user, index) => {\r\n      if(edit === user.id) {\r\n        return(\r\n          <tr key={userDate.id}>\r\n        <th scope=\"row\">{index+1}</th>\r\n        <td><input onChange={(e) => setUserDate({id: userDate.id,name: e.target.value, email: userDate.email, role_id: userDate.role_id})} value={userDate.name}/></td>\r\n        <td><input onChange={(e) => setUserDate({id: userDate.id,name: userDate.name, email: e.target.value, role_id: userDate.role_id})}  value={userDate.email}/></td>\r\n        <td><select onChange={(e) => setUserDate({id: userDate.id,name: userDate.name, email: userDate.email, role_id: e.target.value})} value={userDate.role_id}><option value='1'>Admin</option><option value='2'>Moderator</option></select></td>\r\n        <td>\r\n            <button className='btn btn-success mr-2' onClick={() => saveEdit()}>Save</button>\r\n            <button className='btn btn-danger' onClick={() => cancelEdit()}>Cancel</button>\r\n        </td>\r\n     </tr>  \r\n        )\r\n      }\r\n      else return(\r\n        <tr key={user.id}>\r\n        <th scope=\"row\">{index+1}</th>\r\n        <td>{user.name}</td>\r\n        <td>{user.email}</td>\r\n        <td>{user.role_id === 1 ? 'Admin'  :'Moderator'}</td>\r\n        <td>\r\n            <button className='btn btn-success mr-2' disabled={adminReducer.user.role_id===1 ? false : true} onClick={() => editAccount(user.id)}>Edit</button>\r\n            <button className='btn btn-danger' disabled={adminReducer.user.role_id===1 ? false : true} onClick={() => deleteAccount(user.id)}>Delete</button>\r\n        </td>\r\n      </tr>\r\n      )\r\n      \r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Header />\r\n            <main role=\"main\">\r\n     <section class=\"panel important\">\r\n         \r\n    {loading ? <div>Загузка...</div> :\r\n    <div className='container'>\r\n      <div className='d-flex mb-3 justify-content-between'>\r\n      <h2>Users</h2>\r\n        <button className='btn btn-info' onClick={handleShow} disabled={adminReducer.user.role_id===1 ? false : true}>Новый пользователь <b>+</b></button>\r\n      </div>\r\n       \r\n            <table className=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">#</th>\r\n                <th scope=\"col\">Имя</th>\r\n                <th scope=\"col\">Username</th>\r\n                <th scope=\"col\">Роль</th>\r\n                <th scope='col'>Действие</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n            {finalUser.map((user,index) => (\r\n                userTable(edit,user,index)\r\n            ))}\r\n         \r\n              \r\n            </tbody>\r\n          </table>\r\n        \r\n    </div>\r\n    }\r\n      <Modal  isOpen={showModal} toggle={()=>handleClose(showModal)}   size=\"md\">\r\n                 <ModalBody>\r\n                    <form className='form-group' onSubmit={e => userAdd(e)}>\r\n                      <input onChange={(e) => setNewUser({password: newUser.password,name: e.target.value, email: newUser.email, role_id: newUser.role_id})} value={newUser.name} className='input-group mb-2' type='text' placeholder='Имя' />\r\n                      <input onChange={(e) => setNewUser({password: newUser.password,name: newUser.name, email: e.target.value, role_id: newUser.role_id})} value={newUser.email} className='input-group mt-2' type='text' placeholder='Username' />\r\n                      <select onChange={(e) => setNewUser({password: newUser.password,name: newUser.name, email: newUser.email, role_id: e.target.value})} value={newUser.email}  value={newUser.role_id} className='input-group mt-2'><option value='1'>Admin</option><option value='2'>Moderator</option></select>\r\n                      <button className='btn btn-info mt-2' disabled={adminReducer.user.role_id===1 ? false : true}>Добавить</button>\r\n                    </form>\r\n                 </ModalBody>\r\n\t\t\t</Modal>\r\n            \r\n            </section>\r\n            </main>\r\n            <Footer />\r\n        </div>\r\n    )   \r\n}\r\nexport default connect(mapStateToProps)(AdminUsers)"]},"metadata":{},"sourceType":"module"}
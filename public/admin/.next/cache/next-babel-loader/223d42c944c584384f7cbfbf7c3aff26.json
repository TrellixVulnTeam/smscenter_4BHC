{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport cookie from 'js-cookie';\n\nvar AdminCabinet = function AdminCabinet(_ref) {\n  var user = _ref.user,\n      active = _ref.active;\n  var dispatch = useDispatch();\n\n  var _useState = useState(''),\n      password = _useState[0],\n      setPassword = _useState[1];\n\n  var _useState2 = useState(''),\n      repeatPassword = _useState2[0],\n      setRepeatPassword = _useState2[1];\n\n  var _useState3 = useState({\n    name: user.name,\n    email: user.email\n  }),\n      userDate = _useState3[0],\n      setUserDate = _useState3[1];\n\n  var editOwn = function editOwn(e) {\n    axios.put(\"\".concat(process.env.BASE_URL, \"/editOwn\"), {\n      token: cookie.get('admin_token'),\n      email: userDate.email,\n      name: userDate.name\n    }, {\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n      }\n    }).then(function (res) {\n      if (res.data.success) {\n        dispatch({\n          type: 'ADM_SUCCESS_MESSAGE',\n          payload: res.data.message\n        });\n      } else {\n        dispatch({\n          type: 'ADM_ERROR_MESSAGE',\n          payload: res.data.message\n        });\n      }\n    });\n    e.preventDefault();\n  };\n\n  var passwordChange = function passwordChange(e) {\n    e.preventDefault();\n\n    if (!password || !repeatPassword) {\n      dispatch({\n        type: 'ADM_ERROR_MESSAGE',\n        payload: 'Заполните все поле'\n      });\n    }\n\n    if (repeatPassword !== password) {\n      dispatch({\n        type: 'ADM_ERROR_MESSAGE',\n        payload: 'Пароли не совподают'\n      });\n    } else {\n      dispatch({\n        type: 'ADM_CLOSE_MESSAGE'\n      });\n      axios.get(\"\".concat(process.env.BASE_URL, \"/changePassword\"), {\n        params: {\n          token: cookie.get('admin_token'),\n          password: password\n        }\n      }, {\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        if (res.data.success) {\n          setPassword('');\n          setRepeatPassword('');\n          dispatch({\n            type: 'ADM_SUCCESS_MESSAGE',\n            payload: 'Обновлен пароль'\n          });\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    role: \"main\",\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container row \",\n      children: active === 'info' ? /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: function onSubmit(e) {\n          return editOwn(e);\n        },\n        className: \"col-md-9 mb-3 mx-auto formsStep\",\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          className: \"text-center mx-auto\",\n          children: \"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row col-12 form-group mx-auto\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"name\",\n            children: \"\\u0418\\u043C\\u044F:\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            onChange: function onChange(e) {\n              return setUserDate({\n                name: e.target.value,\n                email: userDate.email\n              });\n            },\n            className: \"form-control focus-visible\",\n            value: userDate.name\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row col-12 form-group mx-auto\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"name\",\n            children: \"Username:\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            onChange: function onChange(e) {\n              return setUserDate({\n                name: userDate.name,\n                email: e.target.value\n              });\n            },\n            name: \"username\",\n            className: \"form-control focus-visible\",\n            value: userDate.email\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row col-12  form-group mx-auto\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"name\",\n            children: \"\\u0420\\u043E\\u043B\\u044C:\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            className: \"form-control focus-visible\",\n            value: user.role_name,\n            disabled: true\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"button-admin form-group\",\n          children: /*#__PURE__*/_jsx(\"button\", {\n            type: \"submit\",\n            children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n          })\n        })]\n      }) : /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: function onSubmit(e) {\n          return passwordChange(e);\n        },\n        className: \"col-md-9 mx-auto formsStep\",\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          className: \"text-center mx-auto\",\n          children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row col-12 form-group mx-auto\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"password\",\n            children: \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C:\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            name: \"password\",\n            onChange: function onChange(e) {\n              return setPassword(e.target.value);\n            },\n            className: \"form-control focus-visible\",\n            value: password\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row col-12 form-group mx-auto\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"password_repeat\",\n            children: \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C:\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            name: \"password_repeat\",\n            onChange: function onChange(e) {\n              return setRepeatPassword(e.target.value);\n            },\n            value: repeatPassword,\n            className: \"form-control focus-visible\"\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"button-admin form-group\",\n          children: /*#__PURE__*/_jsx(\"button\", {\n            type: \"submit\",\n            children: \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport default AdminCabinet;","map":null,"metadata":{},"sourceType":"module"}